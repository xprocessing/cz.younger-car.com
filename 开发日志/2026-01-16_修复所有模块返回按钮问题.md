# 2026-01-16 修复所有模块返回按钮问题

## 问题概述

修复了admin-panel所有模块中返回按钮使用错误URL常量的问题，确保所有返回按钮都指向正确的页面。

## 核心问题

在检查各个模块的返回按钮时，发现所有返回按钮都使用了错误的URL常量：

```php
<a href="<?php echo APP_URL; ?>/inventory_details.php" class="btn btn-outline-secondary mr-2">
    <i class="fa fa-arrow-left"></i> 返回列表
</a>
```

这里使用了`APP_URL`常量，但实际上这些页面都位于admin-panel目录下，应该使用`ADMIN_PANEL_URL`常量。

## 修复内容

### 1. 修复的文件列表

修复了以下文件中的返回按钮和表单action：

1. **aigc/task_history.php**
2. **costs/import.php**
3. **costs/edit.php**
4. **costs/create.php**
5. **inventory_details/inventory_alert.php**
6. **inventory_details/overaged_stats.php**
7. **inventory_details/edit.php**
8. **inventory_details/create.php**
9. **car_data/import.php**
10. **car_data/edit.php**
11. **car_data/create.php**
12. **order_profit/stats.php**
13. **order_profit/create.php**
14. **order_profit/edit.php**
15. **order_profit/import.php**
16. **warehouses/edit.php**
17. **warehouses/create.php**
18. **products/import.php**
19. **products/stats.php**
20. **products/edit.php**
21. **products/create.php**
22. **new_products/create.php**
23. **new_products/edit.php**
24. **store/edit.php**
25. **store/create.php**

### 2. 修复的关键代码

将所有文件中的：
```php
<?php echo APP_URL; ?>
```

替换为：
```php
<?php echo ADMIN_PANEL_URL; ?>
```

### 3. 修复的链接类型

1. **返回按钮链接**
   ```php
   <a href="<?php echo ADMIN_PANEL_URL; ?>/inventory_details.php" class="btn btn-outline-secondary mr-2">
       <i class="fa fa-arrow-left"></i> 返回列表
   </a>
   ```

2. **表单action链接**
   ```php
   <form method="post" action="<?php echo ADMIN_PANEL_URL; ?>/inventory_details.php?action=inventory_alert">
   ```

3. **导出链接**
   ```php
   <a href="<?php echo ADMIN_PANEL_URL; ?>/inventory_details.php?action=export_inventory_alert" class="btn btn-outline-primary">
       <i class="fa fa-download"></i> 导出数据
   </a>
   ```

## 修复结果

✅ **所有返回按钮已修复**：确保所有返回按钮都指向正确的admin-panel目录下的页面
✅ **表单action已修复**：确保所有表单提交都发送到正确的地址
✅ **导出链接已修复**：确保所有导出功能都能正常工作
✅ **无遗漏修复**：修复了所有检查到的视图文件中的URL常量问题

## 修复影响

- **用户体验**：用户点击返回按钮时，现在会正确返回到admin-panel目录下的列表页面
- **功能完整性**：表单提交和导出功能现在可以正常工作
- **代码一致性**：所有URL引用现在都使用了正确的ADMIN_PANEL_URL常量

## 总结

通过这次修复，确保了admin-panel所有模块中的返回按钮、表单提交和导出链接都使用了正确的URL常量，解决了之前返回按钮指向错误地址的问题。现在用户可以正常使用所有模块的返回功能，表单提交和导出功能也能正常工作。