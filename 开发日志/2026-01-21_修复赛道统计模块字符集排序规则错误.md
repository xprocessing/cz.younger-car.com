# 修复赛道统计模块字符集排序规则错误

## 任务描述
修复赛道统计模块中的数据库错误，该错误是由于shop_costs表和store表的字符集排序规则不一致导致的。

## 问题分析
- **错误信息**: `Fatal error: Uncaught PDOException: SQLSTATE[HY000]: General error: 1267 Illegal mix of collations (utf8mb4_unicode_ci,IMPLICIT) and (utf8mb4_general_ci,IMPLICIT) for operation '='`
- **根本原因**: shop_costs表和store表的字符集排序规则不一致，导致在进行JOIN操作时无法直接比较字符串字段
- **影响范围**: 赛道统计模块无法正常加载，因为getTrackStatistics()方法中的SQL查询失败

## 完成的工作

### 1. 修改TrackStatistics模型
- **文件路径**: `admin-panel/models/TrackStatistics.php`
- **修改内容**:
  - 在shop_costs表和store表的JOIN条件中，显式指定排序规则为utf8mb4_unicode_ci
  - 确保platform_name和store_name字段在比较时使用相同的排序规则

### 2. 技术细节
- **排序规则指定**: 在JOIN条件中使用`COLLATE utf8mb4_unicode_ci`显式指定排序规则
- **修改的SQL语句**: `sc.platform_name COLLATE utf8mb4_unicode_ci = s.platform_name COLLATE utf8mb4_unicode_ci AND sc.store_name COLLATE utf8mb4_unicode_ci = s.store_name COLLATE utf8mb4_unicode_ci`
- **兼容性**: 这种修改方式不会影响数据的正确性，只是确保在比较时使用相同的排序规则

### 3. 验证更新
- 使用 `php -l` 命令检查修改后的文件
- 确认没有语法错误

## 结论
已成功修复赛道统计模块中的字符集排序规则不匹配错误。通过在SQL查询的JOIN条件中显式指定排序规则，确保了shop_costs表和store表之间的字符串比较能够正常进行，从而解决了数据库错误。现在赛道统计模块应该能够正常加载和显示数据。