# 2026-01-19 将统计功能迁移到单独页面

## 更新内容

### 1. 控制器层更新（controllers/CompanyCostsController.php）
- 添加了`statistics()`方法，专门处理统计页面的请求
- 该方法获取所有统计数据并传递给新的视图文件

### 2. 视图层更新

#### 2.1 创建新的statistics.php视图文件
- 完整复制了原index.php中的统计图表部分
- 添加了返回费用列表的按钮
- 保留了所有图表功能和Chart.js脚本

#### 2.2 更新index.php视图文件
- 将统计图表部分替换为指向统计页面的入口卡片
- 移除了原有的Chart.js脚本和相关JavaScript代码
- 简化了页面结构，使主要内容更加清晰

### 3. 路由层更新（company_costs.php）
- 添加了`statistics`动作的路由配置
- 确保用户可以通过`company_costs.php?action=statistics`访问统计页面

## 技术细节

### 1. 页面结构变化
- 原页面：index.php包含费用列表和统计图表
- 新结构：
  - index.php：费用列表 + 统计页面入口
  - statistics.php：专门的统计页面，包含所有图表

### 2. 功能保留
- 所有原有的统计功能保持不变
- 图表类型和样式保持一致
- 数据处理逻辑保持不变

### 3. 技术栈
- **后端**：PHP + MySQL
- **前端**：Chart.js（图表绘制）、Bootstrap（页面布局）、JavaScript

## 优化点

- 页面结构更清晰，职责更明确
- 费用列表和统计功能分离，提高用户体验
- 代码更易于维护和扩展

## 访问方式

- 费用列表：`company_costs.php`
- 统计页面：`company_costs.php?action=statistics`或通过列表页面的"查看统计报表"按钮访问