# 将三个结果页面合并为一个

## 修改内容

1. **修改任务历史页面，添加任务详情显示功能**
   - 文件：`views/aigc/task_history.php`
   - 将查看详情按钮从链接改为按钮，并添加了点击事件
   - 在任务列表下方添加了任务详情区域
   - 实现了AJAX加载任务详情的功能
   - 集成了图片预览功能

2. **添加获取任务详情的JSON接口**
   - 文件：`controllers/AIGCController.php`
   - 新增了`getTaskDetail`方法，用于处理AJAX请求并返回JSON格式的任务详情数据

3. **更新路由文件**
   - 文件：`aigc.php`
   - 添加了对`getTaskDetail` action的路由处理

## 功能效果

- 用户现在可以在同一个页面上查看所有任务历史和任务详情
- 点击"查看详情"按钮后，任务详情会在任务列表下方动态显示
- 任务详情包含任务基本信息和处理结果
- 处理结果中的图片可以预览和下载
- 可以随时关闭任务详情，返回任务列表视图

## 技术实现

- 使用AJAX技术实现无刷新加载任务详情
- 动态构建HTML内容显示任务详情和处理结果
- 集成了Bootstrap模态框用于图片预览
- 实现了响应式设计，适应不同屏幕尺寸

## 注意事项

- 此修改不影响原有功能，只是将三个页面的功能整合到了一个页面
- 所有任务数据仍然从数据库中获取
- 用户体验得到了提升，减少了页面跳转
- 代码结构更加清晰，维护更加方便