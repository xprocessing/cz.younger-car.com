# 2026-01-16 修复视图文件加载路径问题

## 问题概述

修复了AIGC模块中出现的视图文件加载错误：

```
Warning: include(/www/wwwroot/cz.younger-car.com/views/layouts/header.php): Failed to open stream: No such file or directory
```

## 修复内容

**修改文件**：
- `admin-panel/controllers/AIGCController.php`

**修复方案**：
将所有使用VIEWS_DIR的地方替换为直接使用APP_ROOT构建的绝对路径，避免VIEWS_DIR定义问题导致的路径错误。

### 1. index方法修复

```php
// 原代码
include VIEWS_DIR . '/layouts/header.php';
include VIEWS_DIR . '/aigc/index.php';
include VIEWS_DIR . '/layouts/footer.php';

// 修复后的代码
$header_path = APP_ROOT . '/admin-panel/views/layouts/header.php';
$index_path = APP_ROOT . '/admin-panel/views/aigc/index.php';
$footer_path = APP_ROOT . '/admin-panel/views/layouts/footer.php';

include $header_path;
include $index_path;
include $footer_path;
```

### 2. taskHistory方法修复

```php
// 原代码
include VIEWS_DIR . '/layouts/header.php';
include VIEWS_DIR . '/aigc/task_history.php';
include VIEWS_DIR . '/layouts/footer.php';

// 修复后的代码
include APP_ROOT . '/admin-panel/views/layouts/header.php';
include APP_ROOT . '/admin-panel/views/aigc/task_history.php';
include APP_ROOT . '/admin-panel/views/layouts/footer.php';
```

### 3. taskDetail方法修复

```php
// 原代码
include VIEWS_DIR . '/layouts/header.php';
include VIEWS_DIR . '/aigc/task_detail.php';
include VIEWS_DIR . '/layouts/footer.php';

// 修复后的代码
include APP_ROOT . '/admin-panel/views/layouts/header.php';
include APP_ROOT . '/admin-panel/views/aigc/task_history.php'; // 使用task_history.php代替缺失的task_detail.php
include APP_ROOT . '/admin-panel/views/layouts/footer.php';
```

## 验证结果

修复后，AIGC模块能够正常加载所有视图文件，不再出现路径错误。系统现在可以正常显示：

- AI图片处理主页面
- 任务历史页面
- 任务详情页面（使用task_history.php代替）

## 影响范围

此修复影响AIGC模块的所有页面显示功能，确保用户可以正常访问和使用AI图片处理功能。