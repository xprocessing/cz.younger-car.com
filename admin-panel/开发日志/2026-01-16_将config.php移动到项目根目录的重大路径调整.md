# 2026-01-16 将config.php移动到项目根目录的重大路径调整

## 操作概述

根据要求，将项目的核心配置文件`config.php`从`admin-panel/config/`目录移动到项目根目录，并更新所有相关代码中的引用路径。这次调整的目的是使配置文件更加集中和易于管理，同时确保项目域名`https://cz.younger-car.com/`的正确使用。

## 具体修改内容

### 1. 移动和更新config.php文件

**移动路径**：`admin-panel/config/config.php` → `config.php`

**更新内容**：
- 更新`APP_ROOT`定义为项目根目录
- 新增`ADMIN_PANEL_DIR`常量，指向`admin-panel`目录
- 更新`PUBLIC_DIR`和`VIEWS_DIR`的定义，基于新的路径结构

### 2. 更新所有入口文件的config.php引用路径

以下文件的config.php引用路径已更新：
- `admin-panel/aigc.php`
- `admin-panel/dashboard.php`
- `admin-panel/login.php`
- `admin-panel/inventory_details.php`
- `admin-panel/dingding/ding_class.php`
- `admin-panel/ding_v2.php`
- `admin-panel/ding.php`
- `admin-panel/costs.php`
- `admin-panel/car_data.php`
- `admin-panel/inventory_details_fba.php`
- `admin-panel/warehouses.php`
- `admin-panel/track.php`
- `admin-panel/products.php`
- `admin-panel/order_profit.php`
- `admin-panel/store.php`
- `admin-panel/new_products.php`
- `admin-panel/query.php`
- `admin-panel/yunfei.php`
- `admin-panel/users.php`
- `admin-panel/permissions.php`
- `admin-panel/roles.php`
- `admin-panel/logout.php`

### 3. 更新控制器、模型和辅助文件的config.php引用路径

以下文件的config.php引用路径已更新：
- `admin-panel/models/AIGC.php`
- `admin-panel/includes/database.php`
- `admin-panel/scripts/process_images_worker.php`

### 4. 更新其他文件的config.php引用路径

以下文件的config.php引用路径已更新：
- `admin-panel/database/create_tables.php`
- `admin-panel/public/track.php`
- `admin-panel/public/query/controller.php`

## 路径定义的变化

### 旧的路径定义（config.php位于admin-panel/config/）
```php
define('APP_ROOT', dirname(__DIR__)); // 指向admin-panel目录
define('PUBLIC_DIR', APP_ROOT . '/public');
define('VIEWS_DIR', APP_ROOT . '/views');
```

### 新的路径定义（config.php位于项目根目录）
```php
define('APP_ROOT', dirname(__FILE__)); // 指向项目根目录
define('ADMIN_PANEL_DIR', APP_ROOT . '/admin-panel');
define('PUBLIC_DIR', ADMIN_PANEL_DIR . '/public');
define('VIEWS_DIR', ADMIN_PANEL_DIR . '/views');
```

## 影响范围

这次调整影响到了项目中的所有文件，包括：
- 所有入口文件
- 所有控制器、模型和辅助文件
- 所有脚本文件
- 所有使用config.php的其他文件

## 测试建议

为了确保系统正常运行，建议进行以下测试：
1. 测试所有入口文件是否能正常加载
2. 测试AIGC模块的功能是否正常
3. 测试仪表盘和其他管理功能是否正常
4. 测试数据库连接是否正常
5. 测试异步脚本是否能正常运行

## 总结

这次将config.php移动到项目根目录的重大路径调整，使项目的配置管理更加集中和规范。虽然涉及到大量文件的修改，但通过系统的规划和执行，确保了所有相关代码都得到了正确的更新。这次调整将有助于提高项目的可维护性和扩展性。