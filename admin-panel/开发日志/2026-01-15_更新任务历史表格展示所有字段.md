# 更新任务历史表格展示所有字段

## 修改内容

1. **修改任务历史表格的表头**
   - 文件：`views/aigc/task_history.php`
   - 位置：第26-33行
   - 添加了以下字段：
     - 任务状态（task_status）
     - 处理状态（process_status）
     - 开始时间（started_at）
     - 完成时间（completed_at）

2. **修改表格内容行**
   - 文件：`views/aigc/task_history.php`
   - 位置：第59-91行
   - 更新了字段名称：
     - 将status改为task_status
     - 添加了process_status字段的展示
     - 添加了started_at和completed_at字段的展示

3. **更新任务详情区域**
   - 文件：`views/aigc/task_history.php`
   - 位置：第190-202行
   - 在任务详情中添加了处理状态字段

## 数据库表结构

根据`database/init.sql`文件中的定义，aigc_tasks表包含以下主要字段：

| 字段名 | 类型 | 说明 |
|-------|------|------|
| id | INT UNSIGNED | 主键ID |
| user_id | INT | 用户ID |
| task_name | VARCHAR(100) | 任务名称 |
| task_type | ENUM | 任务类型 |
| task_status | ENUM | 任务状态 |
| task_params | JSON | 任务参数 |
| original_filename | VARCHAR(255) | 原始文件名 |
| original_path | VARCHAR(255) | 原始文件路径 |
| process_status | ENUM | 处理结果状态 |
| result_url | VARCHAR(255) | 处理结果图像URL |
| error_message | TEXT | 错误信息 |
| success_count | INT UNSIGNED | 成功数量 |
| failed_count | INT UNSIGNED | 失败数量 |
| total_count | INT UNSIGNED | 总数量 |
| started_at | DATETIME | 开始处理时间 |
| completed_at | DATETIME | 处理完成时间 |
| created_at | DATETIME | 创建时间 |
| updated_at | DATETIME | 更新时间 |

## 功能效果

- 任务历史表格现在展示了更多的任务相关信息
- 用户可以在表格中直接看到任务的当前状态和处理状态
- 可以查看任务的开始时间和完成时间
- 表格布局更加合理，信息更加全面

## 注意事项

- 部分字段可能为空（如started_at、completed_at、process_status等），已经添加了相应的处理逻辑
- 使用了适当的徽章颜色来区分不同的状态值，提高可读性
- 保持了与原有界面风格的一致性

## 测试

修改后的代码已经通过了PHP语法检查，可以正常运行。用户可以通过访问任务历史页面来查看所有任务的详细信息。